<!DOCTYPE html>
<html>

<head>
  <title>Temperature Plot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <h1>Dashboard</h1>
  <h4>Date: <span id="date"></span></h4>
  <div class="chart-container" style="position: relative; width:75vw; margin: auto;">
    <canvas id="tempChart"></canvas>
  </div>
  <div class="chart-container" style="position: relative; width:75vw; margin: auto;">
    <canvas id="pressChart"></canvas>
  </div>
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
  <script>
    var socket = io.connect('http://localhost:4000'); //connect to server

    var tempChart = document.getElementById('tempChart').getContext('2d');
    var chartTemp = new Chart(tempChart, {
      // The type of chart we want to create
      type: 'line',

      // The data for our dataset
      data: {
        labels: [],
        datasets: [{
          label: "Temperature",
          borderColor: "#FF5733",
          data: [],
          fill: false,
          pointStyle: 'circle',
          backgroundColor: '#3498DB',
          pointRadius: 5,
          pointHoverRadius: 7,
          lineTension: 0,
        }]
      },
      // Configuration options go here
      options: {}

    });

    var pressChart = document.getElementById('pressChart').getContext('2d');
    var chartPressure = new Chart(pressChart, {
      // The type of chart we want to create
      type: 'line',

      // The data for our dataset
      data: {
        labels: [],
        datasets: [{
          label: "Pressure",
          borderColor: "#FF5733",
          data: [],
          fill: false,
          pointStyle: 'circle',
          backgroundColor: '#3498DB',
          pointRadius: 5,
          pointHoverRadius: 7,
          lineTension: 0,
        }]
      },
      // Configuration options go here
      options: {}

    });

    socket.on('connect',()=>{console.log("connected_GUI")})

    
    socket.on('temp', (data) =>{ //As a temp data is received
      // console.log("data_received on gui");
      // console.log(data);
      // document.getElementById('date').innerHTML = data.date; //update the date
      // if (chartTemp.data.labels.length != 15) { //If we have less than 15 data points in the graph
      //   chartTemp.data.labels.push(data.time); //Add time in x-asix
      //   chartTemp.data.datasets.forEach((dataset) => {
      //     dataset.data.push(data['temp1']); //Add temp in y-axis
      //   });
      // } else { //If there are already 15 data points in the graph.
      //   chartTemp.data.labels.shift(); //Remove first time data
      //   chartTemp.data.labels.push(data.time); //Insert latest time data
      //   chartTemp.data.datasets.forEach((dataset) => {
      //     dataset.data.shift(); //Remove first temp data
      //     dataset.data.push(data['temp1']); //Insert latest temp data
      //   });
      // }
      chartTemp.update(); //Update the graph.
    });

    socket.on('pressure', (data) =>{ //As a temp data is received
      console.log("data_received on gui");
      document.getElementById('date').innerHTML = data.date; //update the date
      if (chartTemp.data.labels.length != 15) { //If we have less than 15 data points in the graph
        chartTemp.data.labels.push(data.time); //Add time in x-asix
        chartTemp.data.datasets.forEach((dataset) => {
          dataset.data.push(data['pressure']); //Add temp in y-axis
        });
      } else { //If there are already 15 data points in the graph.
        chartTemp.data.labels.shift(); //Remove first time data
        chartTemp.data.labels.push(data.time); //Insert latest time data
        chartTemp.data.datasets.forEach((dataset) => {
          dataset.data.shift(); //Remove first temp data
          dataset.data.push(data['pressure']); //Insert latest temp data
        });
      }
      chartTemp.update(); //Update the graph.
    });

  </script>
</body>
<style>
  h1 {
    text-align: center;
    font-family: 'Lato', sans-serif;
  }

  h4 {
    text-align: center;
    font-family: 'Lato', sans-serif;
  }

  p {
    text-align: center;
    font-family: 'Lato', sans-serif;
  }
</style>

</html>
<!-- view rawindex.html hosted with ❤ by GitHub -->
<!--old version-->>
<!DOCTYPE html>
<html>

<head>
  <title>Temperature Plot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <h1>Temperature Graph</h1>
  <h4>Date: <span id="date"></span></h4>
  <div class="chart-container" style="position: relative; width:75vw; margin: auto;">
    <canvas id="myChart"></canvas>
  </div>
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
  <script>
    var socket = io.connect('http://localhost:4000');
    // /socket.io/socket.io.js
     //connect to server
// ,{transports: ['websocket']}
    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
      // The type of chart we want to create
      type: 'line',

      // The data for our dataset
      data: {
        labels: [],
        datasets: [{
          label: "Temperature",
          borderColor: "#FF5733",
          data: [],
          fill: false,
          pointStyle: 'circle',
          backgroundColor: '#3498DB',
          pointRadius: 5,
          pointHoverRadius: 7,
          lineTension: 0,
        }]
      },

      // Configuration options go here
      options: {}

    });

    socket.on('temp', function(data) { //As a temp data is received
      console.log(data.pitch);
      document.getElementById('date').innerHTML = data.date; //update the date
      if (chart.data.labels.length != 15) { //If we have less than 15 data points in the graph
        chart.data.labels.push(data.time); //Add time in x-asix
        chart.data.datasets.forEach((dataset) => {
          dataset.data.push(data.temp); //Add temp in y-axis
        });
      } else { //If there are already 15 data points in the graph.
        chart.data.labels.shift(); //Remove first time data
        chart.data.labels.push(data.time); //Insert latest time data
        chart.data.datasets.forEach((dataset) => {
          dataset.data.shift(); //Remove first temp data
          dataset.data.push(data.temp); //Insert latest temp data
        });
      }
      chart.update(); //Update the graph.
    });
  </script>
</body>
<style>
  h1 {
    text-align: center;
    font-family: 'Lato', sans-serif;
  }

  h4 {
    text-align: center;
    font-family: 'Lato', sans-serif;
  }

  p {
    text-align: center;
    font-family: 'Lato', sans-serif;
  }
</style>

</html>
<!-- view rawindex.html hosted with ❤ by GitHub -->